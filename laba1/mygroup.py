# --- Блок данных ---
# Список студентов. Каждый студент представлен словарем с полями:
# "name": Имя студента (строка)
# "surname": Фамилия студента (строка)
# "exams": Список названий предметов, по которым сдавал экзамены (список строк)
# "marks": Список оценок, полученных по соответствующим экзаменам (список чисел)
groupmates = [
    {
        "name": "Анна",
        "surname": "Иванова",
        "exams": ["Математика", "Физика", "Программирование"],
        "marks": [5, 4, 5]  # Средний балл: (5+4+5)/3 = 4.67
    },
    {
        "name": "Борис",
        "surname": "Петров",
        "exams": ["История", "Философия", "Экономика"],
        "marks": [3, 4, 3]  # Средний балл: (3+4+3)/3 = 3.33
    },
    {
        "name": "Вера",
        "surname": "Сидорова",
        "exams": ["Химия", "Биология", "Экология"],
        "marks": [5, 5, 5]  # Средний балл: (5+5+5)/3 = 5.00
    },
    {
        "name": "Глеб",
        "surname": "Козлов",
        "exams": ["Английский", "Немецкий", "Русский язык"],
        "marks": [4, 4, 5]  # Средний балл: (4+4+5)/3 = 4.33
    },
    {
        "name": "Дарья",
        "surname": "Морозова",
        "exams": ["Алгоритмы", "Базы данных", "Сети"],
        "marks": [3, 5, 4]  # Средний балл: (3+5+4)/3 = 4.00
    },
    {
        "name": "Егор",
        "surname": "Смирнов",
        "exams": ["Теория вероятностей", "Статистика", "Логика"],
        "marks": [5, 4, 4]  # Средний балл: (5+4+4)/3 = 4.33
    },
    {
        "name": "Жанна",
        "surname": "Федорова",
        "exams": ["Право", "Социология", "Психология"],
        "marks": [4, 3, 4]  # Средний балл: (4+3+4)/3 = 3.67
    }
]

# --- Блок функций ---

def calculate_average_mark(marks_list):
    """
    Вычисляет средний балл по заданному списку оценок.
    Если список оценок пуст, возвращает 0, чтобы избежать ошибки деления на ноль.

    :param marks_list: Список числовых оценок.
    :return: Средний балл (float) или 0, если список пуст.
    """
    if not marks_list:  # Проверка, пуст ли список оценок
        return 0.0
    return sum(marks_list) / len(marks_list)

def filter_students_by_average(students_list, min_average_score):
    """
    Фильтрует список студентов, оставляя только тех,
    чей средний балл выше заданного порогового значения.

    :param students_list: Список словарей, представляющих студентов.
    :param min_average_score: Минимальный средний балл, который должен быть у студента,
                              чтобы он попал в отфильтрованный список.
    :return: Список словарей студентов, удовлетворяющих условию фильтрации.
             Каждый словарь в возвращаемом списке содержит имя, фамилию и рассчитанный средний балл.
    """
    qualified_students = []  # Инициализируем пустой список для студентов, прошедших фильтр

    # Итерируемся по каждому студенту в общем списке
    for student in students_list:
        # Получаем список оценок студента. Используем .get() для безопасного доступа,
        # на случай если поле "marks" отсутствует у кого-то (хотя в нашем случае оно есть).
        marks = student.get("marks", [])
        
        # Вычисляем средний балл для текущего студента
        current_average = calculate_average_mark(marks)
        
        # Проверяем, является ли средний балл студента выше заданного минимума
        if current_average > min_average_score:
            # Если условие выполнено, добавляем информацию о студенте в список квалифицированных
            qualified_students.append({
                "name": student["name"],
                "surname": student["surname"],
                "average_score": current_average  # Добавляем рассчитанный средний балл для удобства вывода
            })
            
    return qualified_students  # Возвращаем список студентов, прошедших фильтрацию

# --- Основной блок выполнения программы ---
# Этот блок выполняется только тогда, когда скрипт запускается напрямую
# (т.е. не когда он импортируется как модуль в другой скрипт).
if __name__ == "__main__":
    
    # --- Получение ввода от пользователя ---
    while True:  # Бесконечный цикл до получения корректного ввода
        try:
            # Запрашиваем у пользователя минимальный средний балл
            threshold_str = input("Введите минимальный средний балл для фильтрации (например, 3.5 или 4): ")
            # Преобразуем введенную строку в число с плавающей точкой
            threshold = float(threshold_str)
            
            # Проверяем, находится ли введенный балл в допустимом диапазоне (от 0 до 5)
            if not (0 <= threshold <= 5):
                print("Ошибка: Средний балл должен быть в диапазоне от 0 до 5.")
                # Продолжаем цикл, чтобы запросить ввод снова
                continue
                
            # Если ввод корректен и находится в диапазоне, выходим из цикла
            break
            
        except ValueError:
            # Если пользователь ввел не число, возникает ошибка ValueError
            print("Ошибка: Некорректный ввод. Пожалуйста, введите числовое значение.")
            # Продолжаем цикл, чтобы запросить ввод снова
            
    # --- Фильтрация студентов ---
    # Вызываем функцию фильтрации, передавая ей общий список студентов (groupmates)
    # и введенный пользователем пороговый балл (threshold)
    filtered_students = filter_students_by_average(groupmates, threshold)

    # --- Вывод результатов ---
    # Формируем заголовок для вывода, указывая заданный порог
    print(f"\n--- Студенты со средним баллом выше {threshold:.2f}: ---") # :.2f форматирует число до двух знаков после запятой

    # Проверяем, найдены ли студенты, удовлетворяющие условию
    if filtered_students:
        # Если список не пуст, перебираем найденных студентов и выводим их данные
        for student in filtered_students:
            print(f"Имя: {student['name']}, Фамилия: {student['surname']}, Средний балл: {student['average_score']:.2f}")
    else:
        # Если список пуст, сообщаем пользователю, что никто не подошел под критерий
        print("Нет студентов, удовлетворяющих заданному критерию.")
